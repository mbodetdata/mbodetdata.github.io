<section id="contact" class="section contact-v2" aria-labelledby="contact-title"
         itemscope itemtype="https://schema.org/Person">
  <!-- rattache ce bloc √† la personne du site -->
  <meta itemprop="name" content="{{ site.author.prenom_nom | default: site.author.name }}">
  <link itemprop="url" href="{{ site.author.url | default: site.url | default: site.github.url }}">
  {% if site.author.linkedin %}<link itemprop="sameAs" href="{{ site.author.linkedin }}">{% endif %}

  <header class="section-head">
    <h2 id="contact-title">Contact</h2>
    <p class="lead">Planifions un cr√©neau pour parler <strong>ETL Talend</strong> &amp; <strong>dashboards Power&nbsp;BI</strong>.</p>
  </header>

  <div class="card calendly-card" role="region" aria-label="R√©servation &amp; contacts">
    <div class="calendly-head">
      <div class="calendly-title">
        <span class="calendly-dot" aria-hidden="true"></span>
        <h3 class="calendly-h3">R√©server un cr√©neau (30&nbsp;min)</h3>
      </div>
    </div>

    <!-- Calendly inline (affich√© sur desktop) -->
    <div id="calendly-inline-embed"
         class="calendly-inline"
         data-calendly-url="{{ site.author.calendly_url }}"
         aria-live="polite">
      <div class="calendly-skeleton" aria-hidden="true">
        <p class="muted" style="margin:0">Chargement du calendrier‚Ä¶</p>
      </div>
    </div>

    <!-- CTA principal (popup ‚Äì visible sur mobile) -->
    <div class="actions actions--center">
      <button class="btn cta"
              data-calendly
              data-calendly-url="{{ site.author.calendly_url }}"
              aria-label="Ouvrir le calendrier de r√©servation">
        üìÖ Ouvrir le calendrier
      </button>
    </div>

    <hr class="soft-sep">

    <!-- Contacts secondaires -->
    <div class="contact-inline" aria-label="Contacts directs"
         itemprop="contactPoint" itemscope itemtype="https://schema.org/ContactPoint">
      <meta itemprop="contactType" content="customer support">
      <meta itemprop="areaServed" content="FR">
      <meta itemprop="availableLanguage" content="fr-FR">
      <link itemprop="url" href="{{ site.author.calendly_url }}">

      <p class="lead lead--tight">Ou contactez-moi directement :</p>

      <ul class="contact-list" role="list">
        <li class="contact-row">
          <a class="contact-item" href="{{ site.author.linkedin }}" target="_blank" rel="noopener nofollow">
            <span class="ci-icon" aria-hidden="true">üíº</span>
            <span class="ci-body">
              <strong>LinkedIn</strong>
              <small class="muted">Profil professionnel</small>
            </span>
            <span class="ci-cta" aria-hidden="true">‚Üí</span>
          </a>
        </li>

        <li class="contact-row">
          <a class="contact-item" href="mailto:{{ site.author.email }}" itemprop="email">
            <span class="ci-icon" aria-hidden="true">‚úâÔ∏è</span>
            <span class="ci-body">
              <strong>{{ site.author.email }}</strong>
              <small class="muted">Contact direct</small>
            </span>
          </a>
          <button class="ci-copy-btn" type="button"
                  data-copy="{{ site.author.email }}"
                  aria-label="Copier l‚Äôadresse e-mail">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M16 1H6a2 2 0 0 0-2 2v12h2V3h10V1zm3 4H10a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H10V7h9v14z"/></svg>
          </button>
        </li>

        <li class="contact-row">
          <a class="contact-item" href="tel:{{ site.author.phone | replace: ' ', '' }}" itemprop="telephone">
            <span class="ci-icon" aria-hidden="true">üìû</span>
            <span class="ci-body">
              <strong>{{ site.author.phone }}</strong>
              <small class="muted">Appel ou SMS</small>
            </span>
          </a>
          <button class="ci-copy-btn" type="button"
                  data-copy="{{ site.author.phone }}"
                  aria-label="Copier le num√©ro de t√©l√©phone">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M16 1H6a2 2 0 0 0-2 2v12h2V3h10V1zm3 4H10a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H10V7h9v14z"/></svg>
          </button>
        </li>
      </ul>
    </div>

    <p class="note muted note--foot">R√©ponse sous 24‚Äì48&nbsp;h ouvr√©es.</p>
  </div>
</section>

<!-- Modal Calendly (une seule fois dans la page) -->
<div id="calendly-modal" class="modal" hidden>
  <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="calendlyTitle">
    <button class="modal__close" aria-label="Fermer">√ó</button>
    <div style="padding:.75rem 1rem; border-bottom:1px solid var(--border)">
      <h3 id="calendlyTitle" style="margin:0">R√©server un cr√©neau</h3>
    </div>
    <div id="calendly-inline" class="calendly-inline" data-calendly-url="{{ site.author.calendly_url }}" aria-live="polite"></div>
  </div>
</div>
