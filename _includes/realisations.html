<section id="realisation" class="section" aria-labelledby="work-title">
  <h2 id="work-title">Réalisations récentes</h2>

  {% assign has_dates = false %}
  {% for p in site.data.projets %}{% if p.date %}{% assign has_dates = true %}{% break %}{% endif %}{% endfor %}
  {% if has_dates %}
    {% assign projets_sorted = site.data.projets | sort: "date" | reverse %}
  {% else %}
    {% assign projets_sorted = site.data.projets %}
  {% endif %}

  <div class="carousel" data-carousel="realisations" aria-roledescription="carousel">
    <button class="carousel__btn prev" type="button" aria-label="Défiler vers la gauche" disabled>‹</button>

    <!-- UL = piste, comme pour les certifications -->
    <ul class="carousel__track" role="listbox" aria-label="Liste de réalisations">
      {% for projet in projets_sorted %}
      {% assign idx = forloop.index0 %}
      <li class="carousel__slide" role="option" aria-describedby="proj-desc-{{ idx }}">
        <article class="card project-card"
                 tabindex="0"
                 data-index="{{ idx }}"
                 data-title="{{ projet.title | escape }}"
                 data-client="{{ projet.client | escape }}"
                 data-abstract="{{ projet['text-short'] | default: projet.text | escape }}"
                 data-link="{{ projet.link | relative_url }}"
                 data-contexte="{{ projet.details.contexte | escape }}"
                 data-missions='{{ projet.details.missions | jsonify }}'
                 data-benefices='{{ projet.details.benefices | jsonify }}'
                 data-stack='{{ projet.details.stack | jsonify }}'>

          {%- assign _pt = projet.title -%}
          {%- assign _pt = _pt
            | replace: 'Power BI','<abbr title="Business Intelligence">Power BI</abbr>'
            | replace: 'CI/CD','<abbr title="Continuous Integration / Continuous Deployment">CI/CD</abbr>'
            | replace: 'ETL','<abbr title="Extract-Transform-Load">ETL</abbr>'
            | replace: 'API','<abbr title="Application Programming Interface">API</abbr>'
            | replace: 'BI','<abbr title="Business Intelligence">BI</abbr>'
            | replace: 'DAX','<abbr title="Data Analysis Expressions">DAX</abbr>'
            | replace: 'SQL','<abbr title="Structured Query Language">SQL</abbr>'
            | replace: 'NoSQL','<abbr title="Not Only SQL">NoSQL</abbr>'
            | replace: 'KPI','<abbr title="Key Performance Indicator">KPI</abbr>'
            | replace: 'SLA','<abbr title="Service Level Agreement">SLA</abbr>'
            | replace: 'WMS','<abbr title="Warehouse Management System">WMS</abbr>'
            | replace: 'TMS','<abbr title="Transport Management System">TMS</abbr>'
          -%}
          <h3 class="card-title">{{ _pt }}</h3>
          {%- assign _ps = projet['text-short'] -%}
          {%- assign _ps = _ps
            | replace: 'Power BI','<abbr title="Business Intelligence">Power BI</abbr>'
            | replace: 'CI/CD','<abbr title="Continuous Integration / Continuous Deployment">CI/CD</abbr>'
            | replace: 'ETL','<abbr title="Extract-Transform-Load">ETL</abbr>'
            | replace: 'API','<abbr title="Application Programming Interface">API</abbr>'
            | replace: 'BI','<abbr title="Business Intelligence">BI</abbr>'
            | replace: 'DAX','<abbr title="Data Analysis Expressions">DAX</abbr>'
            | replace: 'SQL','<abbr title="Structured Query Language">SQL</abbr>'
            | replace: 'NoSQL','<abbr title="Not Only SQL">NoSQL</abbr>'
            | replace: 'KPI','<abbr title="Key Performance Indicator">KPI</abbr>'
            | replace: 'SLA','<abbr title="Service Level Agreement">SLA</abbr>'
            | replace: 'WMS','<abbr title="Warehouse Management System">WMS</abbr>'
            | replace: 'TMS','<abbr title="Transport Management System">TMS</abbr>'
          -%}
          <p class="lead" id="proj-desc-{{ idx }}">{{ _ps }}</p>

          <div class="card-actions">
            <button class="btn btn--details open-project" type="button"
                    aria-label="Voir les détails du projet {{ projet.title | escape }}">
              Détails
            </button>
          </div>
        </article>
      </li>
      {% endfor %}
    </ul>

    <button class="carousel__btn next" type="button" aria-label="Défiler vers la droite">›</button>

    <div class="carousel__dots" aria-label="Sélecteur de slides"></div>
  </div>
</section>
