<!doctype html>
<html lang="fr">
<head>
  {% include head.html %}
</head>
<body
  class="{% if page.url == '/' or page.url == '/index.md' %}home{% else %}page{% endif %} layout-{{ page.layout | default: 'page' }}{% if page.slug %} slug-{{ page.slug }}{% endif %}"
  data-page-url="{{ page.url }}"
  data-layout="{{ page.layout | default: 'page' }}"
>
  <!-- Ancre utilitaire pour remonter en haut -->
  <a id="top" class="sr-only" href="#main">Aller au contenu</a>

  {% include header.html %}

  <!-- Contenu principal : micro-données WebPage/Article (selon le layout) -->
  <main id="main" tabindex="-1"
        itemscope
        itemtype="https://schema.org/{% if page.layout == 'post' %}Article{% else %}WebPage{% endif %}">
    <!-- Nom / description / URL (clés pour les rich results) -->
    <meta itemprop="name" content="{{ page.title | default: site.title }}">
    <meta itemprop="description" content="{{ page.description | default: site.description }}">
    <link itemprop="url" href="{{ page.url | replace:'index.html','' | absolute_url }}">
    <meta itemprop="inLanguage" content="{{ site.locale | default: 'fr-FR' }}">

    {%- if page.layout == 'post' -%}
      <!-- Métas Article non visibles (indexation + affichages enrichis) -->
      <meta itemprop="headline" content="{{ page.title }}">
      <meta itemprop="datePublished" content="{{ page.date | date_to_xmlschema }}">
      {%- if page.last_modified_at -%}
      <meta itemprop="dateModified" content="{{ page.last_modified_at | date_to_xmlschema }}">
      {%- endif -%}
      {%- assign article_image = page.image | default: site.og_image | default: '/assets/img/og-image.png' -%}
      <meta itemprop="image" content="{{ article_image | absolute_url }}">
      <meta itemprop="author" content="{{ site.author.name }}">
      <meta itemprop="mainEntityOfPage" content="{{ page.url | replace:'index.html','' | absolute_url }}">
    {%- endif -%}

    {{ content }}
  </main>

  {% include footer.html %}

  {% include modal-project.html %}

</body>
</html>
